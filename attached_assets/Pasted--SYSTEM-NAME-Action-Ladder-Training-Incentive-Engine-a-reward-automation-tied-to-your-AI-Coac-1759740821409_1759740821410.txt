ğŸ¯ SYSTEM NAME

â€œAction Ladder: Training Incentive Engineâ€
(a reward automation tied to your AI Coach and training analytics)

âš™ï¸ FEATURE SUMMARY

Goal:
Encourage players to train and improve by rewarding the top-performing or most active player in each poolhall ladder with discounted or free subscriptions.

Integrated Layers:

âœ… AI Coach Insights (analyzes player sessions)

âœ… Training Tracker (counts hours, improvements, attendance)

âœ… Ladder Membership (who belongs to which hall/division)

âœ… Stripe Connect Billing (automatically applies discounts)

ğŸ’° REWARD RULES (Your Logic, Coded Clean)
Condition	Reward	Notes
ğŸ¥‡ Top training score or activity in a poolhall (for the month)	50% off subscription	Only one winner per hall per month. Based on AI Coach points or training hours.
ğŸš« No double-dip rule	â€”	If a player appears in multiple ladders, they canâ€™t claim twice unless special condition below applies.
ğŸ§© Double ladder exception	Free month	Allowed only if each ladder has â‰¥5 active players (measured by training sessions that month).
â±ï¸ Period	Monthly	Resets every 1st of the month.
ğŸ† Basis for â€œscoreâ€	Weighted average of:	

Coach improvement index (+50%)

Training hours (+30%)

Win-rate in ladder (+20%) |

ğŸ§  HOW IT WORKS (Backend Flow)

AI Coach â†’ Analytics Table

Each completed session generates a coach_score (0â€“100) based on improvement.

Example: +5% aim, +10% cue-ball control, +3% positional accuracy = 85/100.

Daily Aggregator Job

Calculates per-player training totals:

INSERT INTO ladder_training_scores
(player_id, hall_id, ladder_id, period, coach_avg, hours_total, win_rate, total_score)
VALUES (...)
ON CONFLICT (...) DO UPDATE ...


total_score = (coach_avg * 0.5) + (hours_total_norm * 0.3) + (win_rate * 0.2)

Monthly Evaluation Job (1st of each month)

Finds the top total_score per hall_id:

SELECT hall_id, player_id, MAX(total_score)
FROM ladder_training_scores
WHERE period = CURRENT_MONTH
GROUP BY hall_id;


Marks that player as winner.

Checks if they are in multiple ladders:

If yes â†’ check if both ladders have â‰¥5 active players â†’ then full free month.

Stripe Integration

If half-off â†’ calls Stripe.Subscription.update(...) with 50% coupon.

If full-free â†’ applies 100% off promo for next month.

ğŸ§® DATABASE TABLES (add-ons)
ladder_training_scores
Field	Type	Description
id	UUID	â€”
player_id	FK	Player
hall_id	FK	Poolhall
ladder_id	FK	Ladder
period	TEXT	e.g. â€œ2025-10â€
coach_avg	FLOAT	Avg AI Coach score
hours_total	FLOAT	Total practice hours
win_rate	FLOAT	Ladder win rate
total_score	FLOAT	Weighted total
rank	INT	Rank per hall
winner	BOOL	True if top scorer
subscription_rewards
Field	Type	Description
player_id	FK	â€”
hall_id	FK	â€”
ladder_id	FK	â€”
reward_type	ENUM(â€œhalfâ€, â€œfreeâ€)	â€”
applied_to_stripe	BOOL	Mark if coupon applied
applied_date	DATE	â€”
ğŸ’» EXAMPLE ENDPOINTS (Node.js / Express)
// Get monthly leaderboard for a hall
GET /api/hall/:hallId/training-leaderboard?month=2025-10

// Trigger reward calculation manually (admin)
POST /api/rewards/run-monthly

// Stripe webhook for applying rewards
POST /api/stripe/reward-apply

ğŸ§© FRONTEND UI IDEA
â€œğŸ† Training Leaderboardâ€ Tab
Rank	Player	Ladder	Hours	AI Coach Score	Reward
1	Tyga Hoodz	Pro	32h	91	ğŸŸ¢ 50% OFF
2	Rico Banks	Pro	28h	88	â€”
3	J. Bagby	Rookie	19h	79	â€”

Banner Example:

â€œğŸ”¥ Tyga Hoodz dominated training this month at Chalk City Billiards â€” AI Coach Score 91! 50% off subscription unlocked!â€

âš¡ BONUS ADD-ON (Motivation Loop)

To make it hype and viral:

Auto-post a â€œTop Trainerâ€ announcement (with AI-highlight clip) to the hallâ€™s Action Ladder feed.

Add a short savage tagline:

â€œGrinded. Trained. Conquered. ğŸ’° Half-off earned. Whoâ€™s next?â€

ğŸ§  Next Build Options

I can now:

Add this full reward logic into the Action Ladder backend
(connected to Stripe Connect and ladder database)

Create the leaderboard + reward dashboard (React page)

Make the monthly cron job that runs automatically on 1st each month

Integrate it visually into each poolhallâ€™s operator dashboard