🎯 SYSTEM NAME

“Action Ladder: Training Incentive Engine”
(a reward automation tied to your AI Coach and training analytics)

⚙️ FEATURE SUMMARY

Goal:
Encourage players to train and improve by rewarding the top-performing or most active player in each poolhall ladder with discounted or free subscriptions.

Integrated Layers:

✅ AI Coach Insights (analyzes player sessions)

✅ Training Tracker (counts hours, improvements, attendance)

✅ Ladder Membership (who belongs to which hall/division)

✅ Stripe Connect Billing (automatically applies discounts)

💰 REWARD RULES (Your Logic, Coded Clean)
Condition	Reward	Notes
🥇 Top training score or activity in a poolhall (for the month)	50% off subscription	Only one winner per hall per month. Based on AI Coach points or training hours.
🚫 No double-dip rule	—	If a player appears in multiple ladders, they can’t claim twice unless special condition below applies.
🧩 Double ladder exception	Free month	Allowed only if each ladder has ≥5 active players (measured by training sessions that month).
⏱️ Period	Monthly	Resets every 1st of the month.
🏆 Basis for “score”	Weighted average of:	

Coach improvement index (+50%)

Training hours (+30%)

Win-rate in ladder (+20%) |

🧠 HOW IT WORKS (Backend Flow)

AI Coach → Analytics Table

Each completed session generates a coach_score (0–100) based on improvement.

Example: +5% aim, +10% cue-ball control, +3% positional accuracy = 85/100.

Daily Aggregator Job

Calculates per-player training totals:

INSERT INTO ladder_training_scores
(player_id, hall_id, ladder_id, period, coach_avg, hours_total, win_rate, total_score)
VALUES (...)
ON CONFLICT (...) DO UPDATE ...


total_score = (coach_avg * 0.5) + (hours_total_norm * 0.3) + (win_rate * 0.2)

Monthly Evaluation Job (1st of each month)

Finds the top total_score per hall_id:

SELECT hall_id, player_id, MAX(total_score)
FROM ladder_training_scores
WHERE period = CURRENT_MONTH
GROUP BY hall_id;


Marks that player as winner.

Checks if they are in multiple ladders:

If yes → check if both ladders have ≥5 active players → then full free month.

Stripe Integration

If half-off → calls Stripe.Subscription.update(...) with 50% coupon.

If full-free → applies 100% off promo for next month.

🧮 DATABASE TABLES (add-ons)
ladder_training_scores
Field	Type	Description
id	UUID	—
player_id	FK	Player
hall_id	FK	Poolhall
ladder_id	FK	Ladder
period	TEXT	e.g. “2025-10”
coach_avg	FLOAT	Avg AI Coach score
hours_total	FLOAT	Total practice hours
win_rate	FLOAT	Ladder win rate
total_score	FLOAT	Weighted total
rank	INT	Rank per hall
winner	BOOL	True if top scorer
subscription_rewards
Field	Type	Description
player_id	FK	—
hall_id	FK	—
ladder_id	FK	—
reward_type	ENUM(“half”, “free”)	—
applied_to_stripe	BOOL	Mark if coupon applied
applied_date	DATE	—
💻 EXAMPLE ENDPOINTS (Node.js / Express)
// Get monthly leaderboard for a hall
GET /api/hall/:hallId/training-leaderboard?month=2025-10

// Trigger reward calculation manually (admin)
POST /api/rewards/run-monthly

// Stripe webhook for applying rewards
POST /api/stripe/reward-apply

🧩 FRONTEND UI IDEA
“🏆 Training Leaderboard” Tab
Rank	Player	Ladder	Hours	AI Coach Score	Reward
1	Tyga Hoodz	Pro	32h	91	🟢 50% OFF
2	Rico Banks	Pro	28h	88	—
3	J. Bagby	Rookie	19h	79	—

Banner Example:

“🔥 Tyga Hoodz dominated training this month at Chalk City Billiards — AI Coach Score 91! 50% off subscription unlocked!”

⚡ BONUS ADD-ON (Motivation Loop)

To make it hype and viral:

Auto-post a “Top Trainer” announcement (with AI-highlight clip) to the hall’s Action Ladder feed.

Add a short savage tagline:

“Grinded. Trained. Conquered. 💰 Half-off earned. Who’s next?”

🧠 Next Build Options

I can now:

Add this full reward logic into the Action Ladder backend
(connected to Stripe Connect and ladder database)

Create the leaderboard + reward dashboard (React page)

Make the monthly cron job that runs automatically on 1st each month

Integrate it visually into each poolhall’s operator dashboard